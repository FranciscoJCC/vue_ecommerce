<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecommerce</title>

    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <div id="app">
        <header>
            <h3>Ecommerce</h3>
            <button class="cart" @click="cartOpen = !cartOpen"> Carro (0)</button>
            <div class="cart-content"  v-show="cartOpen">
                <div class="cart-content__product" v-for="(product, index) in cart" :key="index" :class="{'bg-gray': index & 1}">
                    <img :src="product.images[0].image" :alt="product.name">
                    <span>{{product.name}} - $ {{ priceNumber(product.price) }}</span>
                </div>
                
            </div>
        </header>
        <main>
            <section class="product">
                <div class="product__thumbnails">
                    <div
                        v-for="(image, index) in product.images"
                        :key="index"
                        class="thumb" 
                        :class="{active: activeImage === index}"
                        :style="{backgroundImage: `url(${product.images[index].thumbnail})`}"
                        @click="activeImage = index"
                    >
                    </div>
                </div>
                <div class="product__image">
                    <img :src="product.images[activeImage].image" :alt="product.name">
                </div>
            </section >
            
            <section class="description">
                <h4>{{product.name.toUpperCase()}} {{product.stock === 0 ? "ðŸ˜¢" : "ðŸ˜Š"}}</h4>
                <span class="badge new" v-if="product.new">Nuevo</span>
                <span class="badge offer" v-show="product.offer">Oferta</span>
                <p class="description__status" v-if="product.stock <= 3"> Quedan pocas unidades</p>
                <p class="description__price"> {{ priceNumber(product.price) }}</p>
                <p class="description__content">
                    {{product.content}}
                </p>
                <div class="discount">
                    <span>CÃ³digo de descuento</span>
                    <input type="text" placeholder="Ingresa tu cÃ³digo" @keyup.enter="product.price *= 50 / 100">
                </div>
                <button :disabled="product.stock === 0" @click="product.stock -= 1" >Agregar al carrito</button>
            </section>
        </main>
    </div>

    <script src="https://unpkg.com/vue@next"></script>
    <script>
        const { createApp } = Vue;
        
        const app = createApp({
            data(){
                return{
                    product:{
                        name: "Camara",
                        price: 450_000.50,
                        stock: 5,
                        content: " Lorem ipsum dolor sit, amet consectetur adipisicing elit. Repellat deleniti minima repellendus quidem possimus voluptate. Nam, possimus rem? Rerum accusantium non quod ex nam labore magnam vero adipisci sum sequi",
                        images: [
                            {
                                image: "./images/camara.jpg",
                                thumbnail: "./images/camara-thumb.jpg",
                            },
                            {
                                image: "./images/camara-2.jpg",
                                thumbnail: "./images/camara-2-thumb.jpg",
                            }
                        ],
                        new: true,
                        offer: false,
                    },
                    activeImage: 0,
                    cartOpen: true,
                    cart: [
                        {
                            name: "Camara",
                            price: 450_000.50,
                            stock: 0,
                            content: " Lorem ipsum dolor sit, amet consectetur adipisicing elit. Repellat deleniti minima repellendus quidem possimus voluptate. Nam, possimus rem? Rerum accusantium non quod ex nam labore magnam vero adipisci sum sequi",
                            images: [
                                {
                                    image: "./images/camara.jpg",
                                    thumbnail: "./images/camara-thumb.jpg",
                                },
                                {
                                    image: "./images/camara-2.jpg",
                                    thumbnail: "./images/camara-2-thumb.jpg",
                                }
                            ],
                            new: true,
                            offer: false,
                        },
                        {
                            name: "Camara PTZ",
                            price: 900_000,
                            stock: 2,
                            content: " Lorem ipsum dolor sit, amet consectetur adipisicing elit. Repellat deleniti minima repellendus quidem possimus voluptate. Nam, possimus rem? Rerum accusantium non quod ex nam labore magnam vero adipisci sum sequi",
                            images: [
                                {
                                    image: "./images/camara.jpg",
                                    thumbnail: "./images/camara-thumb.jpg",
                                },
                                {
                                    image: "./images/camara-2.jpg",
                                    thumbnail: "./images/camara-2-thumb.jpg",
                                }
                            ],
                            new: true,
                            offer: false,
                        },
                        {
                            name: "Camara STEREN",
                            price: 20_000,
                            stock: 2,
                            content: " Lorem ipsum dolor sit, amet consectetur adipisicing elit. Repellat deleniti minima repellendus quidem possimus voluptate. Nam, possimus rem? Rerum accusantium non quod ex nam labore magnam vero adipisci sum sequi",
                            images: [
                                {
                                    image: "./images/camara.jpg",
                                    thumbnail: "./images/camara-thumb.jpg",
                                },
                                {
                                    image: "./images/camara-2.jpg",
                                    thumbnail: "./images/camara-2-thumb.jpg",
                                }
                            ],
                            new: true,
                            offer: false,
                        }
                    ]
                }
            },
            computed: {},

            methods: {
                priceNumber(value){
                    return new Intl.NumberFormat("es-MX").format(value);
                }
            },
        });

        app.mount("#app");
    </script>
</body>

</html>